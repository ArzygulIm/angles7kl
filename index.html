<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°—Ç—Ä–∞–Ω–∞ —É–≥–ª–æ–≤!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Iansui&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./button.css" />
  </head>
  <body>
    <div class="container">
      <div class="animate-box">
        <div class="animate-box2">
          <div class="carousel">
            <div class="slide active" id="slide1">
              <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –£–≥–ª–æ–º–∏—Ä! üåçüìê</h1>
              <div>
                –ó–¥–µ—Å—å –∂–∏–≤—É—Ç —Å–∞–º—ã–µ —Ä–∞–∑–Ω—ã–µ —É–≥–ª—ã:
                <ul>
                  <li>üî∫ –û—Å—Ç—Ä—ã–µ ‚Äî –∫–æ–ª—é—á–∏–µ –∏ –±—ã—Å—Ç—Ä—ã–µ</li>
                  <li>üü¶ –ü—Ä—è–º—ã–µ ‚Äî –Ω–∞–¥—ë–∂–Ω—ã–µ –∏ —Å—Ç—Ä–æ–≥–∏–µ</li>
                  <li>üåÖ –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ ‚Äî –º—É–¥—Ä—ã–µ —Å—Ç–∞—Ä—Ü—ã</li>
                  <li>
                    üé≠ –ê –µ—â—ë ‚Äî —Å–º–µ–∂–Ω—ã–µ, –Ω–∞–∫—Ä–µ—Å—Ç –ª–µ–∂–∞—â–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏
                    –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ ‚Äî —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –∑–∞–∫–æ–Ω!
                  </li>
                </ul>
              </div>
              <p>
                –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–º—Å—è –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ –∑–µ–º–ª—è–º —É–≥–ª–æ–≤, —É–∑–Ω–∞–µ–º –∏—Ö —Ç–∞–π–Ω—ã,
                —Ä–∞–∑–≥–∞–¥–∞–µ–º –∑–∞–≥–∞–¥–∫–∏, –∏ –≤—ã–ø–æ–ª–Ω–∏–º –≤–∞–∂–Ω—ã–µ –º–∏—Å—Å–∏–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –£–≥–ª–æ–º–∏—Ä–∞.
                –¢—ã —Å—Ç–∞–Ω–µ—à—å –Ω–∞—Å—Ç–æ—è—â–∏–º –ì–µ–æ-—Å–ª–µ–¥–æ–ø—ã—Ç–æ–º –∏ –æ—Ç–∫—Ä–æ–µ—à—å —Å–µ–∫—Ä–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ
                —Å–∫—Ä—ã—Ç—ã –≤ –∫–∞–∂–¥–æ–π —Ñ–∏–≥—É—Ä–µ!
              </p>
            </div>

            <div class="slide" id="slide2">
              <h5>üåå –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –£–≥–ª–æ–º–∏—Ä?</h5>
              <p>
                –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –ò—Å–∫–∞—Ç–µ–ª—å –ó–Ω–∞–Ω–∏–π! üåü –ü—Ä–µ–∂–¥–µ —á–µ–º —Ç—ã –ø–æ–ø–∞–¥—ë—à—å –≤
                –£–≥–ª–æ–º–∏—Ä, —Ç–µ–±–µ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è.
              </p>
              <div class="flex flex-jcsb">
                <div class="razdel__box planimetry">
                  <img src="./–∫–∞—Ä—Ç–∏–Ω–∫–∏/–ø–ª–∞–Ω–∏–º–µ—Ç—Ä–∏—è.jpeg" alt="" />
                  <div>
                    <h6>üî∑ –ü–ª–∞–Ω–∏–º–µ—Ç—Ä–∏—è ‚Äî —ç—Ç–æ –º–∏—Ä –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏</h6>
                    <p>
                      –ó–¥–µ—Å—å —É–≥–ª—ã –∂–∏–≤—É—Ç –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞—Ö, –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞—Ö –∏
                      –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è—Ö –ø—Ä—è–º—ã—Ö. –≠—Ç–æ —Å—Ç–æ–ª–∏—Ü–∞ –£–≥–ª–æ–º–∏—Ä–∞ ‚Äî –∑–¥–µ—Å—å
                      –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –≤—Å–µ –≤–µ–ª–∏–∫–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è! ‚úèÔ∏èüìè
                    </p>
                  </div>
                </div>
                <div class="razdel__box stereometry">
                  <img src="./–∫–∞—Ä—Ç–∏–Ω–∫–∏/—Å—Ç–µ—Ä–µ–æ–º–µ—Ç—Ä–∏—è.jpeg" alt="" />
                  <div>
                    <h6>üî∂ –°—Ç–µ—Ä–µ–æ–º–µ—Ç—Ä–∏—è ‚Äî —ç—Ç–æ –º–∏—Ä –≤ –æ–±—ä—ë–º–µ</h6>
                    <p>
                      –ó–¥–µ—Å—å —É–≥–ª—ã –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ —Ç–µ–ª–∞—Ö –∏ –≥—Ä–∞–Ω—è—Ö, –≤ –ø–∏—Ä–∞–º–∏–¥–∞—Ö –∏
                      –∫—É–±–∞—Ö. –ü–æ–∫–∞ –≤—Ö–æ–¥ –≤ —ç—Ç–æ—Ç –º–∏—Ä –æ—Ö—Ä–∞–Ω—è—é—Ç —Å—Ç—Ä–∞–∂–∏ —Ç—Ä—ë—Ö
                      –∏–∑–º–µ—Ä–µ–Ω–∏–π‚Ä¶ –Ω–æ –æ–¥–Ω–∞–∂–¥—ã —Ç—ã —Ç—É–¥–∞ –ø–æ–ø–∞–¥—ë—à—å! üì¶üìê
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div class="slide" id="slide3">
              <div class="flex flex-jcsb select-world__wrap">
                <div class="select-world polygon">
                  <canvas id="polygon" width="400" height="400"></canvas>
                </div>
                <div class="select-world line">
                  <canvas id="line" width="400" height="400"></canvas>
                </div>
                <div class="select-world angle">
                  <canvas id="canvas" width="400" height="400"></canvas>
                </div>
              </div>
            </div>

            <div class="slide" id="slide4">
              <canvas id="myCanvas" width="600" height="400"></canvas>
            </div>

            <div class="slide" id="slide5">
              <div class="flex flex-jcsb">
                <div class="flex">
                  <div>
                    <img src="./–∫–∞—Ä—Ç–∏–Ω–∫–∏/acuteangleicon.png" alt="" />
                  </div>
                  <div>
                    <img src="./–∫–∞—Ä—Ç–∏–Ω–∫–∏/acuteangleicon.png" alt="" />
                  </div>
                  <div>
                    <img src="./–∫–∞—Ä—Ç–∏–Ω–∫–∏/acuteangleicon.png" alt="" />
                  </div>
                  <div>
                    <img src="./–∫–∞—Ä—Ç–∏–Ω–∫–∏/acuteangleicon.png" alt="" />
                  </div>
                </div>
              </div>
            </div>

            <div class="slide" id="slide6">
              <div class="flex flex-jcsb">
                <div></div>
                <div></div>
              </div>
            </div>

            <div class="choose-student">
              <div class="secret-zone" onclick="secretClick()"></div>

              <h1 onclick="secretClick()">üé≤ –ö—Ä—É—Ç–∏ –±–∞—Ä–∞–±–∞–Ω!</h1>

              <div id="roller">
                <div id="nameList"></div>
              </div>

              <button onclick="startRoll()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
              <div id="result"></div>
            </div>
          </div>
          <button class="start" onclick="nextSlide()">
            <span>–ü–æ–≥–Ω–∞–ª–∏!</span>
          </button>
        </div>
      </div>
    </div>

    <script>
      const slides = document.querySelectorAll(".slide");
      let current = 0;

      if (current === 0) {
        document.querySelector(".choose-student").style.display = "none";
      }

      function nextSlide() {
        const currentSlide = slides[current];
        currentSlide.classList.add("exit");

        setTimeout(() => {
          currentSlide.classList.remove("active", "exit");
          current = (current + 1) % slides.length;
          slides[current].classList.add("active");
        }, 600); // –í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å CSS transition
      }

      const students = [
        "–î–∞—Ä–∏–∫–∞",
        "–°—É–º–∞—è",
        "–ê—Ä–ª–µ–Ω",
        "–°—ã–π–º—ã–∫",
        "–ë–∞–π—ç–ª",
        "–ê–ª—å–±–∏–Ω–∞",
        "–ê–ª—Ç—ã–Ω–±–µ–∫",
        "–ú–∞—Ä–∏—è–º",
        "–ê–º–∏—Ä",
        "–ê–¥–∏–ª—å",
        "–ù–∞—Ä—ã–π–∞",
        "–ê–π–¥–∞—Ä",
        "–ê—Ä–≥–µ–Ω",
        "–ò–ª—å–≥–∏–∑",
      ];
      const orderedList = [
        "–°—É–º–∞—è",
        "–ò–ª—å–≥–∏–∑",
        "–°—ã–π–º—ã–∫",
        "–ê–ª—Ç—ã–Ω–±–µ–∫",
        "–ö–∞–º–∏–ª–∞",
        "–ê–ª—å–±–∏–Ω–∞",
        "–ù–∞—Ä—ã–π–∞",
        "–ë–∞–π—ç–ª",
        "–ù—É—Ä–¥–∞—É–ª–µ—Ç",
      ];
      let secretMode = false;
      let clickCount = 0;
      let clickTimer = null;
      let currentIndex = 0;

      function secretClick() {
        clickCount++;
        if (clickCount === 5) {
          secretMode = true;
          alert("‚úÖ –†–µ–∂–∏–º —É—á–∏—Ç–µ–ª—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω");
          clickCount = 0;
        }
        clearTimeout(clickTimer);
        clickTimer = setTimeout(() => (clickCount = 0), 1500);
      }

      function startRoll() {
        const nameList = document.getElementById("nameList");
        nameList.innerHTML = "";
        nameList.style.transition = "none";
        nameList.style.top = "0px";

        let result;

        if (secretMode) {
          result = orderedList[currentIndex];
          currentIndex = (currentIndex + 1) % orderedList.length;
        } else {
          result = students[Math.floor(Math.random() * students.length)];
        }

        // –°–æ–∑–¥–∞—ë–º —Å–ø–∏—Å–æ–∫ –∏–º—ë–Ω (10 —Å–ª—É—á–∞–π–Ω—ã—Ö + –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤ –∫–æ–Ω—Ü–µ)
        const animationNames = [];
        for (let i = 0; i < 10; i++) {
          const rand = students[Math.floor(Math.random() * students.length)];
          animationNames.push(rand);
        }
        animationNames.push(result); // –¥–æ–±–∞–≤–ª—è–µ–º –Ω—É–∂–Ω–æ–µ –∏–º—è –ø–æ—Å–ª–µ–¥–Ω–∏–º

        animationNames.forEach((name) => {
          const div = document.createElement("div");
          div.className = "name";
          div.textContent = name;
          nameList.appendChild(div);
        });

        // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –≤–Ω–∏–∑
        const height = 50; // –≤—ã—Å–æ—Ç–∞ –æ–¥–Ω–æ–≥–æ –±–ª–æ–∫–∞
        const offset = (animationNames.length - 1) * height;

        void nameList.offsetWidth; // –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å—Ç–∏–ª—è
        nameList.style.transition = "top 3s ease-out";
        nameList.style.position = "relative";
        nameList.style.top = `-${offset}px`;
        console.log(secretMode, result);

        setTimeout(() => {
          document.getElementById(
            "result"
          ).textContent = `‚úÖ –í—ã–±—Ä–∞–Ω: ${result}`;
        }, 3000);
      }

      const canvasDraw = document.getElementById("myCanvas");
      const ctxDraw = canvasDraw.getContext("2d");

      let points = [];

      canvasDraw.addEventListener("click", function (e) {
        const rect = canvasDraw.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        points.push({ x, y });

        draw();
      });

      function drawPoint(p, color = "black") {
        ctxDraw.fillStyle = color;
        ctxDraw.beginPath();
        ctxDraw.arc(p.x, p.y, 5, 0, Math.PI * 2);
        ctxDraw.fill();
      }

      function drawLine2(p1, p2, color = "black") {
        console.log("–¢–æ—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ drawLine:", p1, p2);
        if (!p1 || !p2) {
          console.error("‚ùå Invalid points for line:", p1, p2);
          return;
        }
        ctxDraw.strokeStyle = color;
        ctxDraw.lineWidth = 5;
        ctxDraw.beginPath();
        ctxDraw.moveTo(Math.round(p1.x), Math.round(p1.y));
        ctxDraw.lineTo(Math.round(p2.x), Math.round(p2.y));
        ctxDraw.stroke();
      }

      function drawAngle2(p1, p2, p3, color1 = "black", color2 = "black") {
        if (!p1 || !p2 || !p3) {
          console.error("‚ùå Invalid points for angle:", p1, p2, p3);
          return;
        }
        drawLine2(p1, p2, color1);
        drawLine2(p2, p3, color2);

        drawAngleArc(points[0], points[1], points[2]); // –î—É–≥–∞ —É–≥–ª–∞
      }

      function draw() {
        ctxDraw.clearRect(0, 0, canvasDraw.width, canvasDraw.height);

        if (points.length > 3) {
          points = [];
        }
        points.forEach((p) => drawPoint(p));

        if (points.length === 2) {
          console.log("–í—ã–∑–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è drawLine");
          drawLine2(points[0], points[1]);
        }

        if (points.length === 3) {
          drawAngle2(points[0], points[1], points[2]);
        }
      }

      function drawAngleArc(A, B, C, radius = 100, color = "green") {
        const canvas = document.getElementById("myCanvas");
        const ctx = canvas.getContext("2d");

        // –í–µ–∫—Ç–æ—Ä–∞ BA –∏ BC
        const v1 = { x: A.x - B.x, y: A.y - B.y };
        const v2 = { x: C.x - B.x, y: C.y - B.y };

        // –£–≥–ª—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
        const angle1 = Math.atan2(v1.y, v1.x);
        const angle2 = Math.atan2(v2.y, v2.x);

        // –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —É–≥–ª–∞–º–∏ (0...2PI)
        let delta = angle2 - angle1;
        if (delta < 0) delta += 2 * Math.PI;

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ –Ω–∞–∏–º–µ–Ω—å—à–µ–π –¥—É–≥–µ
        const anticlockwise = delta > Math.PI;

        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = 2;

        ctx.arc(B.x, B.y, radius, angle1, angle2, anticlockwise);
        ctx.stroke();
      }

      // –ü—Ä–∏–º–µ—Ä –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–ø–µ—Ä—å –≤—Å–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–∫–∞–º–∏
      // drawLine({ x: 50, y: 50 }, { x: 200, y: 200 }, "green");
    </script>

    <script src="./script.js"></script>
  </body>
</html>
